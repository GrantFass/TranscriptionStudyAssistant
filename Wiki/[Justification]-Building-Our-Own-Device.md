[[_TOC_]]

## Potential Technology Options
There were three main routes that we had the option to pursue for the hardware component of this project. Option one would be to select a pre-made device that contains a microphone, camera, and tracking software. The [Meeting Owl 3](https://owllabs.com/products/meeting-owl-3) is an example of one of these all-in-one solutions. Option 2 would be to simulate a device by using readily available webcams and microphones. Option 3 would be to develop our own custom device from scratch.

### Option 1 - Pre-Made Device: Microphone and Camera In One Device
There are two main downsides to the devices in this category. The first is the exorbiant cost of these devices. The second is that our hardware team would not be able to gain the experinece from building and planning a device themselves. Below is a list of some potential options that we could purchase.

_Meeting OWL 3_  
- This device contains a 360 degree microphone and a 360 degree camera. Both the microphone and the camera are high quality.
- We would be provided with a ready-made system that could provide us with reliable sound and high video quality. Further tests will be completed to evaluate this.
- We currently have access to this device for testing purposes, so we may need to inquire about using the device for the duration of this senior design project.
- Cost: $1049 
- Reference: Issue #1 

_Logitech PTZ Pro 2_  
- Provides flexible pan and title controls for focusing.
- Provides a 90 degree diagonal field of view for capturing a wide-shot.
- It can be setup by plugging it into a laptop using USB.
- A remote can be used to control the camera.
- Cost: $849.99
- Reference: https://www.logitech.com/en-us/products/video-conferencing/conference-cameras/ptz-pro2-conferencecam.960-001184.html

_Logitech Rally Camera_  
- Provides flexible pan and title controls for focusing.
- Provides a 90 degree diagonal field of view for capturing a wide-shot.
- 4K camera resolution and it uses Logitech RightLight TM technology to enhance video quality.
- The camera can be mounted in different ways (on a table, tripod, or on the wall).
- Cost: $1,399
- Reference: https://www.logitech.com/en-us/products/video-conferencing/conference-cameras/rally-ultra-hd-ptz-camera.960-001226.html  

### Option 2 - Pre-Made Device: Separate Microphone and Camera  
The devices in this section are separate microphones and webcams. These are cheaper than the all-in-one devices but still have a downside of cost and lack of development experience. Additionally, these devices do not track presenters as they move. This means that video may not be accurate if the presenter is not in frame. Additionally, most of the webcams are meant to be mounted to a screen and not be free standing. This hinders their ability to aim them at a whiteboard.

_Logitech Rally Mic Pod_  
- Uses Logitech RightSound TM technology to detect conversations and eliminate noise.
- Uses beamforming to target speech. Multiple Rally Mic Pods can be set up to create a beamforming array in a larger room.
- Can be mounted on the ceiling or placed on a table.
- Cost: $349.99
- Reference: https://www.logitech.com/en-us/products/video-conferencing/accessories/mic-pod-for-rally.989-000430.html

_Wireless Lavalier Microphone_
- Can be clipped to the shirt collar of an instructor. With this, we wouldn't have to worry about picking up instructor audio from a distance.
- Wireless, so it's easy to setup and an instructor wouldn't have to worry about wire-management.
- Less expensive compared to the table-top/ceiling mounted conference microphones.
- Costs are different between options. A couple of different brands and types are referred to below.
- Reference:
    - https://www.amazon.com/Wireless-Lavalier-Microphone-Recording-Interview/dp/B0B7M4YFG4/ref=sr_1_2_sspa?keywords=2.4g+wireless+lavalier+microphone&qid=1665329581&qu=eyJxc2MiOiIxLjkxIiwicXNhIjoiMC45MiIsInFzcCI6IjAuMDAifQ%3D%3D&sr=8-2-spons&psc=1
    - https://www.amazon.com/Microphones-Microphone-Aisizon-Smartphone-Recording/dp/B09JNLWYSN/ref=sr_1_3_sspa?keywords=2.4g+wireless+lavalier+microphone&qid=1665329581&qu=eyJxc2MiOiIxLjkxIiwicXNhIjoiMC45MiIsInFzcCI6IjAuMDAifQ%3D%3D&sr=8-3-spons&psc=1

_Razer Kiyo Pro Webcam_
- Contains a light sensor that can adapt to the lighting conditions of the room.
- Provides 1080p video quality.
- Provides a wide-angle lens and the field of view can be adjustable.
- Can be mounted on a monitor or on a tripod.
- USB connection to a laptop.
- Cost: $99.99
- Reference: https://www.bestbuy.com/site/razer-kiyo-pro-1920-x-1080-webcam-with-high-performance-adaptive-light-sensor-black/6452838.p?skuId=6452838

_Elgato Facecam Webcam_
- Provides a 82 degree field of view
- Contains a Sony STARVIS CMOS sensor to adjust to different lighting conditions.
- Contains flash memory for saving video directly to the camera.
- Can be mounted on a monitor or on a tripod.
- USB connection to a laptop.
- Cost: $169.99
- Reference: https://www.bestbuy.com/site/elgato-facecam-full-hd-1080-webcam-for-video-conferencing-gaming-and-streaming-black/6470494.p?skuId=6470494

### Option 3 - Building a Custom Device  
Building a custom device involves a lot of time and effort from our hardware team. This time spent allows them to attempt to create a device that matches exactly what we need and for much cheaper than other options. Each part of the device must be evaluated and selected as well. See some of the below justification pages for more details:

- [[Justification] Camera]([Justification] Camera)
- [[Justification] Custom Device Form Factor]([Justification] Custom Device Form Factor)
- [[Justification] Microcontroller]([Justification] Microcontroller)
- [[Justification] Microphone]([Justification] Microphone)
- [[Justification] Motor]([Justification] Motor)
- [[Justification] Other Hardware Components]([Justification] Other Hardware Components)
- Body Options
  - 3D printing is the most economical and convenient option when it comes to the fabrication of the casing for the device. We could possibly go with metal fabrication, but this could be more expensive and less convenient since we have direct access to 3D printers on campus.  
  - When it comes to overall design, we could provide a case that allows for the device to sit on a desk or to be mounted to the ceiling or wall. This will mostly depend on the feedback we receive from instructors.  


## Evaluation Strategies
For this project, we mainly need to determine which option we would like to go with. To do this, we will be discussing the following:  
- Budget -- We need to consider that off-the-shelf device may be more expensive than designing a custom device. We will also need to keep this in mind when selecting individual parts for a custom design.  
- Product Quality -- The quality of the video and audio data that we obtain with the device is important so that we can accurately generate study materials. For this reason, we need to evaluate which option will achieve the data quality we need for this project.
- Convenience/Uniqueness -- Some options may be more convenient to use. Along with this, we need to consider if we can create a device with some unique quality to it over the course of the year.
- Access to Materials -- Each option will require us to gain access to some piece of hardware. We will need to consider how accessible this equipment is to us (e.g. Will we have access to a Meeting OWL 3 when we need it?).  

## Communication Interface
- [ ] Cost of the relevant hardware (ports, communication chips, drivers, etc.)
- [ ] Ease of use to work with
- [ ] Communication speed
- [ ] Communication Interferance
- [ ] Communication Stability
- [ ] Communication Security

## Choice & Rationale
We plan to build our own device.
### Rationale
We have decided to build our own device because of three main reasons:
1. It provides us with an opportunity to build a device that is cheaper than those that are currently offered on the market
2. It will give us the ability to customize the device for this particular application and environment
3. It will provide the Computer Engineering students on the team with a portion of the project where they get to apply the skills that they have learned from their courses

Through research, it was found that many of the devices that offer audio and video recording for a conference/group environment are very expensive. This would be around the $1000 range. To combat this, we can work on building a device that is more affordable for schools but still provides them with the recording features that they need in a classroom environment. Along with this, building our own device allows us to customize the device for this particular application. We can create a unique device tailored specifically to the classroom environment. In addition to this, it allows us to incorporate instructor and student feedback since it will be easier to add or eliminate features from our own device. This will not be easy to do with a ready-made device. Finally, building our own custom device will provide the Computer Engineering students on the team with an opportunity to apply what they have learned in their coursework to a large project. With this option, everyone on the team is provided with an opportunity to apply their major to the project. For this reason, it makes the option of building our own device even more favorable.

### Tradeoffs
- This option will take more time to implement compared to the other options. We will need to allocate a significant amount of time to complete research on the different hardware components we need to select (e.g. camera, microphone, etc.). In addition to this, we need to budget time to design a schematic/board, an enclosure, as well as firmware.
  - To combat this, we will have to make sure we budget our time correctly so that we are able to get a working device built at the end of this project
- The video and audio quality may not be as good as some of the off-the-shelf devices since we are trying to create a device that is cheaper than most of these devices.
  - This depends on the quality of the components that we select, so we need to make sure we do thorough research
  - This may also depend on the quality of the code that we write/use to drive some of the peripherals, so we need to be aware of this
- Our device may not offer as many "high-tech" features as the other off-the-shelf devices do. For example, the Meeting OWL 3 offers a 360 degree camera which is something our device probably will not have.
  - Our device is intended to be customized for the classroom environment so this may give us a chance to eliminate unnecessary features that other devices provide

## Prototypes & Images
We were able to test a Meeting OWL 3 thanks to Dr. Durant owning a couple. This allowed us to review how well the device could track presenters and manage audio. We were also able to test a stand alone microphone of decent quality. Grant was able to lend his Blue Yeti microphone for this purpose. This was tested as a part of #1. The results are recorded below.

The microphones were tested by running Pink Noise and Audio Sweep tests. This allowed us to compare how well the devices picked up audio across the sound spectrum.

### Task Results
- Dr. Durant has been contacted. Awaiting reply.
  - Two Options
    - ~~Use the one in DH-338~~
    - Use Dr. Durant's personal OWL device
  - OWL device collected and (mostly) tested
- Meeting OWL 3
  - Pitch
    - Cost
      - OWL3: \$1049
      - OWL3 + Expansion Mic: \$1198
      - 2xOWL3 (Room Kit): \$1999
    - $360^\circ$ camera
      - 10ft radius
      - 1080p quality
    - 3x Speakers for projecting sound in all directions
    - $360^\circ$ microphone
      - Boasts that it can pick up audio within 18ft
    - Can use 2 meeting owls in a larger room to detect the active speaker
    - Modulates speaker's voice to make it clearer
    - Follows presenter
  - Specs
    - CPU: Qualcomm Snapdragon 605 processor
    - Camera Resolution: ?
    - Camera FoV: $360^\circ$
    - Output Resolution: 1080p HD
    - Microphone Pickup Radius: 18ft
    - Camera Pickup Radius: 10ft
    - Speaker Output Level: 80dB SPL
    - Connects to WiFi
- Discovered OWL has another product -- The 'Whiteboard OWL'
  - Pitch
    - Cost: \$599
    - The presenter is rendered transparent
    - Visual artifacts (e.g. shadows, glare) are removed
    - Post-processing to make whiteboard text more visible
    - "Works for whiteboards up to 20'x15' from 16' away"
    - Participants can download whiteboard image
  - Specs
    - CPU: ?
    - Camera Resolution: 4208x3120
    - Camera FoV: $68^\circ$
    - Output Resolution: 1080p
    - Connects to WiFi

---

### Audio Testing Results
#### Materials
- 1x Blue Yeti Microphone
- 1x Standalone Speaker (TODO: model)
- 1x Meeting OWL
- 1x Laptop/laptop speaker
- 1x Computer with `Sonic Visualizer` software installed

#### Procedure
##### Experiment 1: Audio Sweep
1. Place the microphone in proximity to the speaker (though consider placing it further if the speaker is large)
2. Using the speaker, play the audio sweep clip. Record the audio from the microphone.

### Experiment 2: Pink Noise
1. Place the microphone in proximity to the speaker (though consider placing it further if the speaker is larger)
2. Using the speaker, play the pink noise clip for approximately 10 seconds. Record the audio from the microphone.

##### Experiment 3: OWL Audio Sweep
#TODO

##### Experiment 4: OWL Pink Noise
1. Place the OWL in proximity to the laptop
2. Using the laptop speaker, play the pink noise clip for at least 10 seconds. Record the audio from the OWL microphone.

#### Results

##### Experiment 1: Audio Sweep
<details>
  <summary>True Audio Sweep Analysis</summary>
  ![image](/uploads/193e4a35568488f6ee7ffa8a2059403a/image.png)
</details>
<details>
  <summary>Experimental Audio Sweep Analysis</summary>
  ![image](/uploads/544be36916df344e79b74848cefdfc48/image.png)
</details>

From comparing the above images, we can clearly see that the results are not perfect. While for the true audio, the peak frequency spectrogram (PFS) starts from around 20Hz and continues up to 21.5kHz. For the experimental audio, the PFS starts from approximately 90Hz and ends up at 21.5kHz. In other words, the microphone has a tendency to attenuate the lower frequencies, but is fully capable of handling higher frequencies. 

##### Experiment 2: Pink Noise
<details>
  <summary>True Pink Noise Analysis</summary>
  ![image](/uploads/5afdf5f6be2adcc7c9cf08536db9c955/image.png)
</details>
<details>
  <summary>Experimental Pink Noise Analysis</summary>
  ![image](/uploads/333d62ba5b91ced6afbadbcb00e0a3f1/image.png)
</details>

For `Experiment 2`, the PFS was not overly helpful. However, more or less the same results were seen.
In the true audio sample, the frequency goes from approximately 40Hz to 22kHz. In the experimental audio sample, the frequency goes from approximately 120Hz to 20kHz.

##### Experiment 3: OWL Audio Sweep
#TODO 

##### Experiment 4: OWL Pink Noise
<details>
  <summary>True Pink Noise Analysis</summary>
  ![image](/uploads/5afdf5f6be2adcc7c9cf08536db9c955/image.png)
</details>
<details>
  <summary>Experimental OWL Pink Noise Analysis</summary>
  ![image](/uploads/ceae8bf0631c5a4346436d7b9d1fbd03/image.png)
</details>

Like with `Experiment 2`, the PFS for `Experiment 4` was not overly helpful. For the OWL mic, it seemed to pick up in the range of approximately 125-20kHz. This range is slightly less than expected. However, it goes to show that we do not necessarily need to focus a lot of attention on the lower frequencies of the device.

---

#### Initial Usage Overview
Thanks to the Lunabotics club, I was able to use the OWL in a practical manner.
The meeting was setup in with 7 people on-location physically and 1 person remote.

The meeting video can be found [here](https://drive.google.com/file/d/1V9XtCVr5QntMr1BeSedkMKcbhBkcyUA6/view?usp=sharing).
The demo video can be found [here](https://drive.google.com/file/d/1ck1xBax1yTRRDtSuTy4A_cHz32o0a_Db/view?usp=sharing).

Overall, the OWL's ability to keep track of everyone was mostly mediocre in my opinion. Whether it was because we had too many people at the meeting, or if it was because it seemed to constantly shift around, the OWL device didn't seem to have as clean of an experience as advertised.

TL;DR:
- **PROS**
	- Was extremely easy to setup
		- No extra software needed
		- Worked easily with Microsoft Teams and Discord right out of the box
		- Audio quality was good, and could pick up sound form across the room
- **CONS**
	- Camera issues
		- Camera would occasionally shift to keep track of someone who was not talking, but moving (sometimes even in the background)
		- Even when the camera was focused on the speaker, the camera view would constantly shift around, zoom in, zoom out, etc.
		- The top bar (the one that shows the $360^\circ$ view) was not helpful for the most part
		- The top bar relied on the OWL being oriented a 'correct' way, and improper orientation caused some people to be cut off
		- Had difficulty tracking even one person who was walking around and talking, as can be seen in the demo video.
	- Seemed very fragile to the touch, would not feel comfortable transporting it in anything but a sturdy box (like the one it came in)

---

#### File Access
The audio and video files used to complete the analysis in this report can be found here:
https://drive.google.com/drive/folders/1IkPF0nvL7wVD4nlKw-VGd5KvBTSpyOMa?usp=sharing

#### References
- [Meeting OWL 3 Datasheet](https://resources.owllabs.com/hubfs/website/pdps/mo3%20datasheet/datasheet_mo3_en.pdf)
- [Meeting OWL 3 Product Page](https://owllabs.com/products/meeting-owl-3)
- [Whiteboard OWL](https://owllabs.com/products/whiteboard-owl)
- [Whiteboard OWL Datasheet](https://resources.owllabs.com/hubfs/website/pdp/datasheet_WBO.pdf)

### Prototyping Plan for Building Our Own Device
The prototyping plan for building our own device involved creating sketches of possible devices. It also included outlining possible schematics and generating a list of features. This prototyping can be seen on other [Justification] pages in the wiki. The sketches can be found at [[Justification] Custom Device Form Factor]([Justification] Custom Device Form Factor). Wiring diagrams can be found at [[Hardware] Wiring Design]([Hardware] Wiring Design).









